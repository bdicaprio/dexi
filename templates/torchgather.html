{% extends 'base.html' %}
{% block content %}

  <div class="layui-body">
    <!-- 内容主体区域 -->

                 
                    
      <div style="margin-top:30px;width:100%;height:50px;">
            <div style="display:block;float:left;margin-left:30px;" id="layerDemo">                        
                 <button data-method="offset" data-type="auto" class="layui-btn" id="add-project">导入</button>                          
            </div>
      </div>
    
    
      <div style="padding: 15px;">

                 <from class="layui-form" method="post" action="" onsubmit="return dosubmit();" lay-filter="example">{% csrf_token %}
						<table class="layui-hide" id="test" lay-filter="test"></table>                                                                                                                                                                                
                 </from>
                                                  
      </div>
      
      
 </div>
  
  <div class="layui-footer">
    <!-- 底部固定区域 -->
    
  </div>
</div>
{% endblock %}



{% block js %}
<script>
layui.use(['jquery','element','form','table', 'layedit', 'laydate'], function(){
      var element = layui.element
      ,table = layui.table
      ,form = layui.form;
      
      table.render({
	    elem: '#test'
	    ,url:'/getuserinfo/'
	    ,cols: [[
	       {field:'username', width:90, title: '用户'}
	      ,{field:'companyname', width:350, title: '公司'}
	      ,{field:'phone', width:200, title: '电话'}
	      ,{field:'hyperlink', width:150,title: '企业统计报表',event: 'statisticsonclick'}	      
	      ,{field:'hyperlink', width:150,title: '企业概况',event: 'companyonclick'}
	      ,{field:'hyperlink', width:150, title: '经济概况',event: 'economiconclick'}
	      ,{field:'hyperlink', width:150, title: '人员概况',event: 'personnelonclick'}
	      ,{field:'hyperlink', width:150, title: '科技项目概况',event: 'projectsonclick'}
	      ,{field:'hyperlink', width:150, title: '科技活动概况',event: 'activitiesonclick'}	      	      
	      ,{fixed: 'right',  toolbar: '#barDemo'}	      
	    ]]
	    ,page: true
	  });
      
    	  
      table.on('tool(test)', function(obj){
            var data = obj.data;
            if(obj.event === 'statisticsonclick'){ 
                var username = data.username                              
               layer.open({
                     type:2 ,
                     area: ['1500px','850px'],   
                     manmin: true,
                     content: '/getStatistics?username=' + username            
               })                            
            } 
                   
            else if(obj.event === 'companyonclick'){ 
               var username = data.username                              
               layer.open({
                     type:2 ,
                     area: ['1500px','850px'],   
                     manmin: true,
                     content: '/getCompany?username=' + username            
               })                            
            } 
                        
            else if(obj.event === 'economiconclick'){ 
                var username = data.username                              
               layer.open({
                     type:2 ,
                     area: ['1500px','850px'],   
                     manmin: true,
                     content: '/getEconomic?username=' + username            
               })                            
            }  
            
            else if(obj.event === 'personnelonclick'){ 
                var username = data.username                              
               layer.open({
                     type:2 ,
                     area: ['1500px','850px'],   
                     manmin: true,
                     content: '/getPersonnel?username=' + username            
               })                            
            }  
            
            else if(obj.event === 'projectsonclick'){ 
                var username = data.username     
                var page = 1       
                var limit = 10     
               layer.open({
                     type:2 ,
                     area: ['1500px','850px'],   
                     manmin: true,
                     content: '/getProjects?username=' + username
               })                            
            }   
            
            else if(obj.event === 'activitiesonclick'){ 
                var username = data.username                              
               layer.open({
                     type:2 ,
                     area: ['1500px','850px'],   
                     manmin: true,
                     content: '/getActivities?username=' + username            
               })                            
            }                                                                
                        
      });	  
                                  
});

</script>
<script type="text/html" id="barDemo">
  <a class="layui-btn layui-btn-xs" lay-event="edit">导出</a>
  <!--<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>--> 
</script>

	  
{% endblock %}
